<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŸå­æ¨¡å‹æ¼”é€²æ¨¡æ“¬ - Interactive Science</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* éš±è—æ»¾å‹•æ¢ä½†ä¿æŒåŠŸèƒ½ */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const AtomicModelSimulation = () => {
            const [activeModel, setActiveModel] = useState('dalton');
            const [isPlaying, setIsPlaying] = useState(true);
            const [showFailure, setShowFailure] = useState(false);
            
            // é‡å­æ¨¡å‹ï¼šè»ŒåŸŸé¸æ“‡ç‹€æ…‹
            const [quantumOrbital, setQuantumOrbital] = useState('1s'); // 1s, 2s, 2p, 3s, 3p, 3d
            
            const canvasRef = useRef(null);
            const requestRef = useRef();
            
            // æ³¢è€³æ¨¡å‹å°ˆç”¨ç‹€æ…‹
            const [bohrElectronState, setBohrElectronState] = useState({ orbit: 0, transition: null });

            // åˆ‡æ›æ¨¡å‹æ™‚é‡ç½®
            useEffect(() => {
                setShowFailure(false);
                if (activeModel === 'bohr') {
                    setBohrElectronState({ orbit: 0, transition: null });
                }
                // åˆ‡æ›åˆ°é‡å­æ¨¡å‹æ™‚é è¨­ 1s
                if (activeModel === 'quantum') {
                    setQuantumOrbital('1s');
                }
            }, [activeModel]);

            // è»ŒåŸŸè³‡è¨Šå®šç¾© (å»¶ä¼¸å­¸ç¿’)
            const orbitalInfo = {
                '1s': { name: '1s è»ŒåŸŸ', desc: 'åŸºæ…‹ï¼Œçƒå½¢å°ç¨±ï¼Œç„¡ç¯€é¢ã€‚é›»å­æœ€é è¿‘åŸå­æ ¸ã€‚' },
                '2s': { name: '2s è»ŒåŸŸ', desc: 'çƒå½¢å°ç¨±ï¼Œä½†åœ¨ä¸­é–“æœ‰ä¸€å€‹ã€Œå¾‘å‘ç¯€é¢ã€ï¼ˆç™½è‰²ç©ºç’°ï¼‰ï¼Œæ­¤è™•é›»å­å‡ºç¾æ©Ÿç‡ç‚º 0ã€‚' },
                '2p': { name: '2p è»ŒåŸŸ', desc: 'å•éˆ´å½¢ (Dumbbell)ï¼Œæœ‰å…©å€‹è‘‰ç‰‡ã€‚å…·æœ‰æ–¹å‘æ€§ï¼Œä¸­é–“æœ‰ä¸€å€‹é€šéåŸå­æ ¸çš„ç¯€é¢ã€‚' },
                '3s': { name: '3s è»ŒåŸŸ', desc: 'æ›´å¤§çš„çƒå½¢ï¼Œå…§éƒ¨æœ‰å…©å€‹å¾‘å‘ç¯€é¢ï¼ˆå…©åœˆç©ºç’°ï¼‰ï¼Œå±¤æ¬¡åˆ†æ˜ã€‚' },
                '3p': { name: '3p è»ŒåŸŸ', desc: 'å•éˆ´å½¢ï¼Œä½†æ¯” 2p æ›´å¤§ï¼Œä¸”è‘‰ç‰‡å…§éƒ¨å¤šäº†ä¸€å€‹ç¯€é¢ï¼ˆåƒè¢«åˆ‡é–‹ä¸€æ¨£ï¼‰ã€‚' },
                '3d': { name: '3d è»ŒåŸŸ', desc: 'å¹¸é‹è‰å½¢ (Cloverleaf) æˆ– é›™å•éˆ´å½¢ã€‚æœ‰å…©å€‹ç¯€é¢é€šéåŸå­æ ¸ï¼Œå±•ç¤ºæ›´è¤‡é›œçš„è§’å‹•é‡åˆ†ä½ˆã€‚' },
            };

            const models = {
                dalton: {
                    id: 'dalton',
                    scientist: 'é“è€³é “ (John Dalton)',
                    year: '1803',
                    title: 'å¯¦å¿ƒçƒé«”æ¨¡å‹',
                    concept: 'åŸå­æ˜¯ç‰©è³ªçš„æœ€å°å–®ä½ï¼Œåƒæ˜¯ä¸€é¡†å …ç¡¬ã€ä¸å¯åˆ†å‰²çš„å¯¦å¿ƒæ’çƒã€‚',
                    evidence: 'ã€å®šæ¯”å®šå¾‹ã€‘èˆ‡ã€å€æ¯”å®šå¾‹ã€‘ã€‚åŒ–å­¸åæ‡‰åªæ˜¯åŸå­çš„é‡æ–°æ’åˆ—ï¼ŒåŸå­æœ¬èº«ä¸æœƒæ”¹è®Šã€‚',
                    failure: 'ç„¡æ³•è§£é‡‹éœé›»ç¾è±¡ï¼ˆæ‘©æ“¦èµ·é›»ï¼‰èˆ‡å¾Œä¾†ç™¼ç¾çš„æ¬¡åŸå­ç²’å­ï¼ˆé›»å­ï¼‰ã€‚',
                    color: 'bg-stone-200 text-stone-900 border-stone-200'
                },
                thomson: {
                    id: 'thomson',
                    scientist: 'æ¹¯æœ¨ç”Ÿ (J.J. Thomson)',
                    year: '1897',
                    title: 'è‘¡è„ä¹¾å¸ƒä¸æ¨¡å‹',
                    concept: 'åŸå­æ˜¯ä¸€å€‹å¸¶æ­£é›»çš„å‡å‹»çƒé«”ï¼Œå¸¶è² é›»çš„é›»å­åƒè‘¡è„ä¹¾ä¸€æ¨£é‘²åµŒåœ¨å…¶ä¸­ã€‚',
                    evidence: 'ã€é™°æ¥µå°„ç·šç®¡å¯¦é©—ã€‘ã€‚ç™¼ç¾å¸¶è² é›»çš„å¾®ç²’ï¼ˆé›»å­ï¼‰ï¼Œä¸”å…¶è³ªé‡é å°æ–¼æ°«åŸå­ï¼Œè­‰æ˜åŸå­å…§éƒ¨æœ‰çµæ§‹ã€‚',
                    failure: 'ç„¡æ³•è§£é‡‹æ‹‰å¡ç¦çš„Î±ç²’å­æ•£å°„å¯¦é©—ï¼ˆå¤§éƒ¨åˆ†Î±ç²’å­ç©¿é€ï¼Œæ¥µå°‘æ•¸å¤§è§’åº¦åæŠ˜ï¼‰ã€‚',
                    color: 'bg-amber-100 text-amber-900 border-amber-200'
                },
                rutherford: {
                    id: 'rutherford',
                    scientist: 'æ‹‰å¡ç¦ (Ernest Rutherford)',
                    year: '1911',
                    title: 'è¡Œæ˜Ÿç¹æ—¥æ¨¡å‹ (æ ¸å‹æ¨¡å‹)',
                    concept: 'åŸå­å¤§éƒ¨åˆ†æ˜¯ä¸­ç©ºçš„ï¼Œæ­£é›»è·é›†ä¸­åœ¨æ¥µå°çš„ã€ŒåŸå­æ ¸ã€ï¼Œé›»å­åœ¨æ ¸å¤–éš¨æ©Ÿç¹è¡Œã€‚',
                    evidence: 'ã€Î±ç²’å­æ•£å°„å¯¦é©—ã€‘ã€‚çµ•å¤§å¤šæ•¸Î±ç²’å­ç›´ç·šé€šéé‡‘ç®”ï¼Œæ¥µå°‘æ•¸è¢«å½ˆå›ã€‚',
                    failure: 'æ ¹æ“šå¤å…¸é›»å‹•åŠ›å­¸ï¼Œå¸¶é›»ç²’å­åŠ é€Ÿé‹å‹•æœƒè¼»å°„èƒ½é‡ï¼Œå°è‡´è»Œé“åŠå¾‘ç¸®å°ï¼Œæœ€çµ‚å¢œå…¥åŸå­æ ¸ï¼›ä¸”ç„¡æ³•è§£é‡‹å…‰è­œä¸é€£çºŒæ€§ã€‚',
                    color: 'bg-blue-100 text-blue-900 border-blue-200'
                },
                bohr: {
                    id: 'bohr',
                    scientist: 'æ³¢è€³ (Niels Bohr)',
                    year: '1913',
                    title: 'æ°«åŸå­èƒ½éšæ¨¡å‹',
                    concept: 'é›»å­åªèƒ½åœ¨ç‰¹å®šçš„ã€Œè»Œé“ã€ï¼ˆèƒ½éšï¼‰ä¸Šé‹è¡Œï¼Œåœ¨æ­¤ç©©å®šè»Œé“ä¸Šä¸æœƒè¼»å°„èƒ½é‡ã€‚',
                    evidence: 'ã€æ°«åŸå­ç™¼å°„å…‰è­œã€‘ã€‚æ°«åŸå­çš„å…‰è­œæ˜¯æ˜ç·šå…‰è­œï¼Œè­‰æ˜èƒ½é‡æ˜¯é‡å­åŒ–çš„ã€‚',
                    failure: 'åƒ…èƒ½å®Œç¾è§£é‡‹æ°«åŸå­ï¼ˆå–®é›»å­åŸå­ï¼‰ï¼Œç„¡æ³•è§£é‡‹å¤šé›»å­åŸå­å…‰è­œåŠå…‰è­œå¼·åº¦ï¼Œä¸”é•åæ¸¬ä¸æº–åŸç†ã€‚',
                    color: 'bg-purple-100 text-purple-900 border-purple-200'
                },
                quantum: {
                    id: 'quantum',
                    scientist: 'æµ·æ£®å ¡ & è–›ä¸æ ¼',
                    year: '1926~',
                    title: 'é›»å­é›²æ¨¡å‹ (é‡å­åŠ›å­¸)',
                    concept: 'é›»å­ä¸å¾ªå›ºå®šè»Œé“ï¼Œè€Œæ˜¯ä»¥æ©Ÿç‡æ³¢å­˜åœ¨ã€‚ç„¡æ³•åŒæ™‚æ¸¬çŸ¥ä½ç½®èˆ‡å‹•é‡ï¼ˆæ¸¬ä¸æº–åŸç†ï¼‰ï¼Œåªèƒ½è¨ˆç®—å‡ºç¾æ©Ÿç‡ï¼ˆé›»å­é›²ï¼‰ã€‚',
                    evidence: 'ã€é›™ç‹¹ç¸«å¯¦é©—ã€‘ã€ã€è–›ä¸æ ¼æ–¹ç¨‹å¼ã€‘ã€‚èƒ½ç²¾ç¢ºé æ¸¬å¤šé›»å­åŸå­è¡Œç‚ºèˆ‡åŒ–å­¸éµã€‚',
                    failure: 'ç›®å‰æœ€å®Œå–„çš„æ¨¡å‹ã€‚ä½†åœ¨æ¥µå°å°ºåº¦ä¸‹èˆ‡é‡åŠ›çš„çµ±ä¸€ï¼ˆè¬æœ‰ç†è«–ï¼‰ä»æ˜¯ç‰©ç†å­¸è–æ¯ã€‚',
                    color: 'bg-teal-100 text-teal-900 border-teal-200'
                }
            };

            // è¼”åŠ©å‡½æ•¸ï¼šè¨ˆç®—ä¸åŒè»ŒåŸŸçš„æ©Ÿç‡å¯†åº¦ (ç°¡åŒ–ç‰ˆç”¨æ–¼ 2D è¦–è¦ºåŒ–)
            const getOrbitalProbability = (x, y, type) => {
                // å°‡åƒç´ åº§æ¨™è½‰æ›ç‚ºåŸå­å–®ä½ (Atomic Units æ¯”ä¾‹ç¸®æ”¾)
                const scale = 25; 
                const r = Math.sqrt(x*x + y*y) / scale;
                
                let psi = 0;

                // å¾‘å‘æ³¢å‡½æ•¸èˆ‡è§’åº¦æ³¢å‡½æ•¸çš„ç°¡åŒ–ä¹˜ç©
                switch(type) {
                    case '1s': 
                        psi = Math.exp(-r); 
                        break;
                    case '2s': 
                        psi = (2 - r) * Math.exp(-r/2);
                        break;
                    case '2p':
                        psi = (x/scale) * Math.exp(-r/2);
                        break;
                    case '3s':
                        psi = (27 - 18*r + 2*r*r) * Math.exp(-r/3);
                        break;
                    case '3p':
                        psi = (6 - r) * (x/scale) * Math.exp(-r/3);
                        break;
                    case '3d':
                        psi = (x/scale) * (y/scale) * Math.exp(-r/3);
                        break;
                    default:
                        psi = 0;
                }
                
                return psi * psi; // æ©Ÿç‡å¯†åº¦ = Ïˆ^2
            };

            const draw = (ctx, frameCount) => {
                const width = ctx.canvas.width;
                const height = ctx.canvas.height;
                const centerX = width / 2;
                const centerY = height / 2;

                ctx.clearRect(0, 0, width, height);

                // èƒŒæ™¯ç¶²æ ¼
                ctx.strokeStyle = '#f1f5f9';
                ctx.lineWidth = 1;
                ctx.beginPath();
                for (let x = 0; x <= width; x += 40) { ctx.moveTo(x, 0); ctx.lineTo(x, height); }
                for (let y = 0; y <= height; y += 40) { ctx.moveTo(0, y); ctx.lineTo(width, y); }
                ctx.stroke();

                switch (activeModel) {
                    case 'dalton':
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, 80, 0, 2 * Math.PI);
                        ctx.fillStyle = '#78716c'; 
                        ctx.fill();
                        ctx.beginPath();
                        ctx.arc(centerX - 25, centerY - 25, 20, 0, 2 * Math.PI);
                        ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                        ctx.fill();
                        ctx.fillStyle = '#44403c';
                        ctx.font = '16px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText("ä¸å¯åˆ†å‰²çš„å¯¦å¿ƒçƒ", centerX, centerY + 110);
                        break;

                    case 'thomson':
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, 100, 0, 2 * Math.PI);
                        ctx.fillStyle = 'rgba(252, 211, 77, 0.4)'; 
                        ctx.fill();
                        ctx.strokeStyle = '#f59e0b';
                        ctx.lineWidth = 2;
                        ctx.stroke();
                        
                        // æ­£é›»è·ç¬¦è™Ÿ
                        ctx.fillStyle = '#d97706';
                        ctx.font = '24px Arial';
                        ctx.textAlign = 'center';
                        [[0,0], [40,40], [-40,-40], [40,-40], [-40,40]].forEach(pos => {
                             ctx.fillText("+", centerX + pos[0], centerY + pos[1] + 8);
                        });

                        const electrons = [
                            {x: -30, y: -50}, {x: 40, y: -20}, {x: -50, y: 30}, 
                            {x: 20, y: 60}, {x: 60, y: 10}, {x: -20, y: 10}
                        ];
                        electrons.forEach((e, i) => {
                            const jitterX = Math.sin(frameCount * 0.1 + i) * 2;
                            const jitterY = Math.cos(frameCount * 0.1 + i) * 2;
                            ctx.beginPath();
                            ctx.arc(centerX + e.x + jitterX, centerY + e.y + jitterY, 8, 0, 2 * Math.PI);
                            ctx.fillStyle = '#2563eb';
                            ctx.fill();
                            ctx.fillStyle = 'white';
                            ctx.font = '12px Arial';
                            ctx.fillText("-", centerX + e.x + jitterX, centerY + e.y + jitterY + 4);
                        });
                        ctx.fillStyle = '#92400e';
                        ctx.font = '16px Arial';
                        ctx.fillText("è‘¡è„ä¹¾å¸ƒä¸", centerX, centerY + 130);
                        break;

                    case 'rutherford':
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, 8, 0, 2 * Math.PI); 
                        ctx.fillStyle = '#dc2626';
                        ctx.fill();
                        ctx.fillStyle = 'white';
                        ctx.font = '10px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText("+", centerX, centerY + 3);

                        const rutherfordOrbits = [
                            { rx: 80, ry: 30, angle: frameCount * 0.05, rot: 0 },
                            { rx: 80, ry: 30, angle: frameCount * 0.07 + 1, rot: Math.PI / 3 },
                            { rx: 80, ry: 30, angle: frameCount * 0.06 + 2, rot: -Math.PI / 3 }
                        ];

                        rutherfordOrbits.forEach(o => {
                            ctx.save();
                            ctx.translate(centerX, centerY);
                            ctx.rotate(o.rot);
                            ctx.beginPath();
                            ctx.ellipse(0, 0, o.rx, o.ry, 0, 0, 2 * Math.PI);
                            ctx.strokeStyle = 'rgba(37, 99, 235, 0.2)';
                            ctx.stroke();
                            const ex = o.rx * Math.cos(o.angle);
                            const ey = o.ry * Math.sin(o.angle);
                            ctx.beginPath();
                            ctx.arc(ex, ey, 5, 0, 2 * Math.PI);
                            ctx.fillStyle = '#2563eb';
                            ctx.fill();
                            ctx.restore();
                        });
                        
                        ctx.fillStyle = '#1e3a8a';
                        ctx.font = '16px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText("è¡Œæ˜Ÿç¹æ—¥ (ä¸ç©©å®š)", centerX, centerY + 130);
                        break;

                    case 'bohr':
                        const r1 = 60;
                        const r2 = 120;
                        [r1, r2].forEach((r, idx) => {
                            ctx.beginPath();
                            ctx.arc(centerX, centerY, r, 0, 2 * Math.PI);
                            ctx.strokeStyle = idx === 0 ? '#9333ea' : '#a855f7';
                            ctx.setLineDash([5, 5]);
                            ctx.stroke();
                            ctx.setLineDash([]);
                            ctx.fillStyle = '#6b21a8';
                            ctx.font = '12px Arial';
                            ctx.fillText(`n=${idx+1}`, centerX + r + 15, centerY);
                        });

                        ctx.beginPath();
                        ctx.arc(centerX, centerY, 8, 0, 2 * Math.PI);
                        ctx.fillStyle = '#dc2626';
                        ctx.fill();

                        let targetR = bohrElectronState.orbit === 0 ? r1 : r2;
                        const angle = frameCount * 0.05;
                        const ex = centerX + targetR * Math.cos(angle);
                        const ey = centerY + targetR * Math.sin(angle);

                        ctx.beginPath();
                        ctx.arc(ex, ey, 6, 0, 2 * Math.PI);
                        ctx.fillStyle = '#2563eb';
                        ctx.fill();
                        
                        ctx.fillStyle = '#581c87';
                        ctx.font = '16px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText("èƒ½éšèºé·", centerX, centerY + 150);
                        break;

                    case 'quantum':
                        ctx.beginPath();
                        ctx.arc(centerX, centerY, 5, 0, 2 * Math.PI);
                        ctx.fillStyle = '#dc2626';
                        ctx.fill();

                        const pointsPerFrame = 800; 
                        const boxSize = 140; 
                        ctx.fillStyle = 'rgba(17, 94, 89, 0.7)'; 

                        for(let i=0; i<pointsPerFrame; i++) {
                            const randX = (Math.random() - 0.5) * 2 * boxSize;
                            const randY = (Math.random() - 0.5) * 2 * boxSize;
                            
                            const prob = getOrbitalProbability(randX, randY, quantumOrbital);
                            
                            let visualScale = 1;
                            if (quantumOrbital.includes('3')) visualScale = 60; 
                            else if (quantumOrbital.includes('2')) visualScale = 18;
                            else visualScale = 2.5; 

                            if (Math.random() < prob * visualScale) {
                                ctx.beginPath();
                                ctx.fillRect(centerX + randX, centerY + randY, 1.3, 1.3);
                            }
                        }
                        
                        ctx.fillStyle = '#134e4a';
                        ctx.font = '16px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText("æ©Ÿç‡å¯†åº¦åˆ†ä½ˆ", centerX, centerY + 150);
                        break;
                }
            };

            useEffect(() => {
                const canvas = canvasRef.current;
                const ctx = canvas.getContext('2d');
                let frameCount = 0;
                
                const animate = () => {
                    frameCount++;
                    if (isPlaying) {
                        draw(ctx, frameCount);
                    }
                    requestRef.current = requestAnimationFrame(animate);
                };
                
                requestRef.current = requestAnimationFrame(animate);
                return () => cancelAnimationFrame(requestRef.current);
            }, [activeModel, isPlaying, bohrElectronState, quantumOrbital]);

            const toggleBohrOrbit = () => {
                setBohrElectronState(prev => ({ ...prev, orbit: prev.orbit === 0 ? 1 : 0 }));
            };

            return (
                <div className="flex flex-col w-full max-w-6xl mx-auto p-4 gap-6 font-sans">
                
                {/* é ‚éƒ¨æ¨™é¡Œ */}
                <div className="text-center space-y-2">
                    <h1 className="text-3xl font-bold text-slate-800 flex items-center justify-center gap-2">
                        <span className="text-blue-600 text-4xl">âš›ï¸</span>
                        åŸå­æ¨¡å‹çš„æ¼”é€²
                    </h1>
                    <p className="text-slate-500">å¾é“è€³é “åˆ°é‡å­åŠ›å­¸ï¼šè­‰æ“šå¦‚ä½•æ¨å‹•ç†è«–çš„ä¿®æ­£</p>
                </div>

                {/* æ¨¡å‹åˆ‡æ›å°èˆª */}
                <div className="overflow-x-auto pb-2 scrollbar-hide">
                    <div className="flex justify-start md:justify-center gap-2 min-w-max bg-slate-50 p-2 rounded-xl">
                        {Object.keys(models).map((key) => (
                        <button
                            key={key}
                            onClick={() => setActiveModel(key)}
                            className={`px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2 whitespace-nowrap border
                            ${activeModel === key 
                                ? `${models[key].color.split(' ')[0]} ${models[key].color.split(' ')[1]} ${models[key].color.split(' ')[2]} shadow-md transform scale-105` 
                                : 'bg-white text-slate-600 border-transparent hover:bg-slate-100'}`}
                        >
                            {models[key].scientist}
                        </button>
                        ))}
                    </div>
                </div>

                <div className="grid lg:grid-cols-2 gap-6 items-start h-full">
                    
                    {/* å·¦å´ï¼šæ¨¡æ“¬è¦–çª— */}
                    <div className="flex flex-col gap-4">
                        <div className="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col relative">
                            
                            {/* æ¨¡æ“¬å™¨æ§åˆ¶åˆ— */}
                            <div className="bg-slate-100 p-2 flex justify-between items-center border-b border-slate-200 z-10">
                                <span className="text-xs font-bold text-slate-500 uppercase tracking-wider pl-2 flex items-center gap-1">
                                    <span>ğŸ‘ï¸</span> Simulation View
                                </span>
                                <div className="flex gap-1">
                                    <button onClick={() => setIsPlaying(!isPlaying)} className="px-2 py-1 hover:bg-slate-200 rounded text-slate-600 font-bold">
                                        {isPlaying ? "â¸" : "â–¶"}
                                    </button>
                                    {activeModel === 'bohr' && (
                                        <button onClick={() => setBohrElectronState({orbit:0})} className="px-2 py-1 hover:bg-slate-200 rounded text-slate-600 font-bold">
                                            â†º
                                        </button>
                                    )}
                                </div>
                            </div>
                            
                            {/* Canvas ç•«å¸ƒ */}
                            <div className="relative bg-white flex items-center justify-center p-4 h-[350px]">
                                <canvas 
                                    ref={canvasRef} 
                                    width={350} 
                                    height={350}
                                    className="w-full max-w-[350px] aspect-square"
                                />
                                
                                {/* æ³¢è€³äº’å‹•å±¤ */}
                                {activeModel === 'bohr' && (
                                    <div className="absolute bottom-6 left-0 right-0 text-center">
                                        <button 
                                            onClick={toggleBohrOrbit}
                                            className="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-full text-sm font-bold shadow-lg transition-transform active:scale-95"
                                        >
                                            {bohrElectronState.orbit === 0 ? "çµ¦äºˆèƒ½é‡ (èºé· â†‘)" : "é‡‹æ”¾èƒ½é‡ (è½å› â†“)"}
                                        </button>
                                    </div>
                                )}

                                {/* é‡å­äº’å‹•å±¤ */}
                                {activeModel === 'quantum' && (
                                    <div className="absolute top-4 right-4 flex flex-col gap-1 bg-white/90 p-2 rounded-lg shadow-sm border border-slate-100 backdrop-blur-sm">
                                        <span className="text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-1 text-center">åˆ‡æ›è»ŒåŸŸ</span>
                                        {['1s', '2s', '2p', '3s', '3p', '3d'].map(orb => (
                                            <button
                                                key={orb}
                                                onClick={() => setQuantumOrbital(orb)}
                                                className={`text-xs px-2 py-1 rounded border transition-colors ${
                                                    quantumOrbital === orb 
                                                    ? 'bg-teal-600 text-white border-teal-600' 
                                                    : 'bg-white text-slate-600 border-slate-200 hover:bg-slate-50'
                                                }`}
                                            >
                                                {orb}
                                            </button>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        {/* é‡å­æ¨¡å‹å»¶ä¼¸è³‡è¨Š */}
                        {activeModel === 'quantum' && (
                            <div className="bg-teal-50 border border-teal-200 rounded-xl p-4 animate-in slide-in-from-top-2">
                                <h4 className="text-teal-900 font-bold flex items-center gap-2 mb-1">
                                    <span>ğŸ“š</span>
                                    å»¶ä¼¸å­¸ç¿’ï¼š{orbitalInfo[quantumOrbital].name}
                                </h4>
                                <p className="text-sm text-teal-800 leading-relaxed">
                                    {orbitalInfo[quantumOrbital].desc}
                                </p>
                                <div className="mt-2 text-xs text-teal-600 bg-white/50 p-2 rounded">
                                    <span className="font-bold">è§€å¯Ÿé‡é»ï¼š</span>
                                    {quantumOrbital.includes('s') && "æ³¨æ„åœ“å½¢çš„ç¯€é¢ï¼ˆç©ºç’°ï¼‰ï¼Œé€™ä»£è¡¨é›»å­åœ¨è©²è·é›¢å‡ºç¾æ©Ÿç‡æ¥µä½ã€‚"}
                                    {quantumOrbital.includes('p') && "æ³¨æ„å•éˆ´å½¢ç‹€çš„æ–¹å‘æ€§ï¼Œä»¥åŠç¯€é¢å¦‚ä½•åˆ‡éåŸé»ã€‚"}
                                    {quantumOrbital.includes('d') && "æ³¨æ„è¤‡é›œçš„èŠ±ç“£å½¢ç‹€ï¼Œé€™è§£é‡‹äº†éæ¸¡é‡‘å±¬è±å¯Œçš„åŒ–å­¸æ€§è³ªã€‚"}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* å³å´ï¼šçŸ¥è­˜èªªæ˜å€ */}
                    <div className={`rounded-xl shadow-lg border p-6 flex flex-col gap-5 h-full transition-colors duration-300 ${models[activeModel].color.split(' ')[0].replace('bg-', 'bg-opacity-20 ')} ${models[activeModel].color.split(' ')[2]}`}>
                        
                        <div>
                            <div className="text-sm font-bold opacity-70 mb-1">{models[activeModel].year}</div>
                            <h2 className="text-2xl font-bold mb-2 text-slate-900">{models[activeModel].title}</h2>
                            <div className="flex items-start gap-3 text-sm leading-relaxed mb-4 text-slate-800">
                                <span className="mt-0.5 text-lg opacity-70">ğŸ“–</span>
                                <p>{models[activeModel].concept}</p>
                            </div>
                        </div>

                        <div className="bg-white/70 p-4 rounded-lg backdrop-blur-sm border border-white/50">
                            <h3 className="font-bold flex items-center gap-2 mb-2 text-sm uppercase tracking-wide text-slate-700">
                                <span>ğŸ”¬</span>
                                é—œéµè­‰æ“š (Establishment)
                            </h3>
                            <p className="text-sm leading-relaxed text-slate-700">
                                {models[activeModel].evidence}
                            </p>
                        </div>

                        <div className={`mt-auto bg-white rounded-lg border overflow-hidden transition-all duration-300 ${showFailure ? 'ring-2 ring-red-100 border-red-200' : 'border-slate-200 hover:border-red-200'}`}>
                            <button 
                                onClick={() => setShowFailure(!showFailure)}
                                className="w-full flex items-center justify-between p-4 text-left transition-colors hover:bg-slate-50"
                            >
                                <div className="flex items-center gap-2">
                                    <span className={`${showFailure ? 'text-red-500' : 'text-slate-400'}`}>
                                        {showFailure ? 'â“' : 'â“'}
                                    </span>
                                    <span className={`font-bold text-sm uppercase tracking-wide ${showFailure ? 'text-red-800' : 'text-slate-500'}`}>
                                        {showFailure ? "ç†è«–ç¼ºé™· (Failure)" : "æ€è€ƒï¼šé€™å€‹æ¨¡å‹æœ‰ä»€éº¼å•é¡Œï¼Ÿ"}
                                    </span>
                                </div>
                                <span className="text-slate-400 text-sm">
                                    {showFailure ? 'â–¼' : 'ğŸ‘ï¸'}
                                </span>
                            </button>
                            
                            {showFailure && (
                                <div className="p-4 pt-0 bg-red-50/30 animate-in slide-in-from-top-2 duration-300">
                                    <div className="h-px w-full bg-red-100 mb-3"></div>
                                    <div className="flex gap-3">
                                        <span className="text-red-500 mt-1 flex-shrink-0 text-xs">â–¶</span>
                                        <p className="text-sm text-red-900 leading-relaxed">
                                            {models[activeModel].failure}
                                        </p>
                                    </div>
                                </div>
                            )}
                        </div>

                    </div>

                </div>

                <div className="text-center text-xs text-slate-400 mt-4 pb-4">
                    äº’å‹•å¼ç§‘å­¸å²æ•™å­¸å·¥å…· | å°ˆç‚ºè³‡å„ªæ•™è‚²è¨­è¨ˆ | æ¨¡æ“¬å…§å®¹ç¶“æ•¸å­¸ç°¡åŒ–ä»¥é©æ‡‰ç¶²é æ•ˆèƒ½
                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AtomicModelSimulation />);
    </script>
</body>
</html>
